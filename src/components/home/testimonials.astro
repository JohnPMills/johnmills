---
const { testimonials = [] } = Astro.props;
---

<style>
  .testimonial-slider {
    position: relative;
    height: 300px; /* Adjust based on your card height */
    overflow: hidden;
  }

  .testimonial-card {
    position: absolute;
    width: 100%;
    max-width: 1000px; /* Adjust card width */
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    transition: opacity 1s ease-in-out;
  }

  .testimonial-card.active {
    opacity: 1;
  }
</style>

<div class="testimonial-slider">
  {testimonials.map((t, index) => (
    <div class={`testimonial-card ${index === 0 ? 'active' : ''}`}>
      <div class="p-6 bg-white dark:bg-neutral-900 rounded-xl shadow text-left mx-auto max-w-sm">
        <p class="text-sm text-neutral-700 dark:text-neutral-300 italic">"{t.quote}"</p>
        <p class="mt-4 font-semibold text-neutral-900 dark:text-white">â€” {t.name}</p>
        {t.title && <p class="text-xs text-neutral-500">{t.title}</p>}
      </div>
    </div>
  ))}
</div>

<script>
  // Auto-rotate testimonials
  document.addEventListener('DOMContentLoaded', () => {
    const cards = document.querySelectorAll('.testimonial-card');
    let currentIndex = 0;
    
    function showNextTestimonial() {
      cards[currentIndex].classList.remove('active');
      currentIndex = (currentIndex + 1) % cards.length;
      cards[currentIndex].classList.add('active');
    }
    
    // Change every 5 seconds
    setInterval(showNextTestimonial, 5000);
  });
</script>
